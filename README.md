DICore
=======

> 正在设计和开发阶段

DICore 是一个快速的接口生成工具，使用 GraphQL 查询数据表。DICore 的目标是帮助你快速完成开发任务。

每一个接口的开发都需要几小时乃至几天的时间，接口很复杂，这的确需要很多的工序，每次需求变更都团队立马开始一次紧张的交付之旅。前端工程师、后端工程师、测试工程师包括产品经理会反复的开会确认每一个细节。

能不能让我们专注在业务模型的设计上？当我们设计好模型，立马可以使用。

或者前端工程师可以自行决定需要哪些数据，不需要哪些数据。

## 使用说明

这里用一个联系人列表的应用举例。应用可以查询所有的联系人数据，包括基本信息：名字、电子邮件地址，还包括每一个联系人的朋友的联系数据。

我们先开始设计数据表模型。除了基本信息之外，朋友关系我们使用一张多对多的关系表保存。

```
contact
+----+---------+--------------------+------------------+
| id | name    | email              | created_at       |
+----+---------+--------------------+------------------+
| 1  | cj      | cj@iuantu.com      | 2021-01-01 23:00 |
+----+---------+--------------------+------------------+
| 2  | fallout | fallout@iuantu.com | 2021-01-01 23:00 |
+----+---------+--------------------+------------------+
| 3  | cenxl   | cenxl@iuantu.com   | 2021-01-01 23:00 |
+----+---------+--------------------+------------------+

contact_friend
+----+------------+-----------+------------------+
| id | contact_id | friend_id | created_at       |
+----+------------+-----------+------------------+
| 1  | 1          | 2         | 2021-01-01 23:00 |
+----+------------+-----------+------------------+
| 2  | 2          | 1         | 2021-01-01 23:00 |
+----+------------+-----------+------------------+
```

表格创建完成并运行DICore后，使用GraphQL查询数据。

```graphql
{
    contacts {
        name
        email
        friends {
            name
            email
        }
    }
}
```

结果

```json
[
    {
        "name": "cj",
        "email": "cj@iuantu.com",
        "friends": [
            {
                "name": "fallout",
                "email": "fallout@iuantu.com"
            }
        ]
    }
]
```

## 特性

DICore 运行在 dotnet 环境下，使用 EFCore 实现数据库访问查询，使用 DynamicLinq 构造查询。

- 为数据表提供GraphQL 查询

## 路线

- 认证支持
- RBAC 支持

## 安装

## 使用

配置数据库连接

```
$ ./dicore
Listening on 5000
```

## 架构

基本流程是 GraphQL 的解析模块分析查询的请求，转换成 EFCore 的查询对象。在这中间插入了 DynamicLinq，由它来构造 EFCore 的查询对象，这样做是一个彩蛋特性的需要。

GraphQL本身是要定义Schema Type的，你不用做这件事，DICore为你做了。DICore反射数据库中的结构，并转换为DICore定义的MetaData，最后将MetaData转换为Schema Type。



- MetaData
- GraphQL To DynamicLinq

## 协议

Copyright 2021 IUANTU

Licensed under the MIT: https://opensource.org/licenses/MIT